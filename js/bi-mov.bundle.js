!function(e){function t(t){for(var i,a,s=t[0],l=t[1],c=t[2],d=0,g=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&g.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(u&&u(t);g.length;)g.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={4:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([158,0]),n()}({11:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(1),r=n(6),o=n(5);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=this,n=document.querySelector("[data-scroll-container]");this.layerId="yt-layer",this.playerId="yt-player",this.layer=document.createElement("div"),this.layer.classList.add(this.layerId);var i='\n      <div class="yt-container">\n        <button type="button" class="btn-close"><span class="a11y">Close YouTube Video</span></button>\n        <div id="'.concat(this.playerId,'" class="yt-player"></div>\n      </div>\n    ');n?n.insertAdjacentElement("beforebegin",this.layer):document.querySelector(".main").appendChild(this.layer),this.layer.innerHTML=i,this.btnClose=this.layer.querySelector(".btn-close"),this.btnClose.addEventListener("click",(function(e){t.close(),e.stopPropagation(),e.preventDefault()}))}var t,n,s;return t=e,(n=[{key:"init",value:function(){this.org=location.origin,this.ready=!1,this.readyTimer=null;var e=this,t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.addEventListener("resize",this.resize.bind(this),!1),this.resize(),window.onYouTubeIframeAPIReady=function(){e.makePlayer()}}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=this.width*(9/16)-300,this.height<480&&(this.height=480);var e=document.getElementById(this.playerId);e&&(e.style.width=this.width+"px",e.style.height=this.height+"px")}},{key:"makePlayer",value:function(){var e=this;this.player=new YT.Player(this.playerId,{width:this.width,height:this.height,events:{onReady:function(){e.ready=!0,e.onPlayerReady.bind(e.player)},onStateChange:this.onPlayerStateChange.bind(this)},playerVars:{rel:0,playsinline:1,origin:this.org}})}},{key:"open",value:function(e){var t=this;e&&(t.ready?(Object(r.a)(t.layer),o.a.checkOS("iOS")&&(document.body.style.overflow="hidden"),t.videoId=e,t.player.loadVideoById({videoId:t.videoId}),t.layer.style.display="block",i.a.to(t.layer,{autoAlpha:1}),null!==t.readyTimer&&clearTimeout(t.readyTimer)):t.readyTimer=setTimeout((function(){t.open(e)}),50))}},{key:"close",value:function(){var e=this;Object(r.b)(this.layer),o.a.checkOS("iOS")&&(document.body.style="none"),this.player.pauseVideo(),i.a.to(this.layer,{autoAlpha:0,onComplete:function(){e.layer.style.display="none"}})}},{key:"onPlayerReady",value:function(e){e.target.loadVideoById({videoId:this.videoId})}},{key:"onPlayerStateChange",value:function(e){e.data===YT.PlayerState.ENDED&&this.player.playVideo()}}])&&a(t.prototype,n),s&&a(t,s),e}()},158:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(3),o=n(7),a=n(11),s=n(8);function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.a.registerPlugin(r.ScrollTrigger),i.a.registerPlugin(o.a),i.a.config({nullTargetWarn:!1}),this.defaultTitle="Movement that inspires",this.scrollEl=document.documentElement||window.scrollingElement}var t,n,c;return t=e,(n=[{key:"init",value:function(){this.initResize(),this.initView(),this.initLnbState(),this.initEvent(),this.initYT(),this.pinStoryCover(),this.initSlogan(),this.pinMissionBackground(),this.setParallaxImgStory(),this.pinMindsetCover(),this.pinDimmedMindset(),this.setBgMindset(),this.initItalic(),this.setParallaxImgMindset(),this.setRevealText(),this.setCoverTitle(),this.fixedBgIE()}},{key:"setCoverTitle",value:function(){document.querySelectorAll(".sect--cover").forEach((function(e){var t=e.querySelector(".title");r.ScrollTrigger.create({trigger:e,start:function(){return"top 40%"},end:function(){return"+=".concat(e.clientHeight/2)},toggleActions:"play reverse none reverse",toggleClass:{targets:t,className:"is-active"}})}))}},{key:"initEvent",value:function(){var e=this;document.querySelectorAll(".nav__link").forEach((function(t){t.addEventListener("click",(function(t){if(!window.scrollLock){window.scrollLock=!0;var n=this.getAttribute("href"),r=document.getElementById(n.split("#")[1]),o=r.querySelector(".sect--cover"),a=r.querySelector(".sect--cover .bg-visual");e.lnb.classList.contains("is-sticky")?(e.updateLnb(n),o.offsetTop<10&&(e.lnb.classList.remove("is-sticky"),e.isCover=!0),i.a.set(a,{opacity:0,scale:1.2}),window.scrollTo(0,o.offsetTop),i.a.fromTo(a,{opacity:0},{opacity:1,duration:1}),i.a.fromTo(a,{scale:1.2},{scale:1,duration:5})):(e.lnb.classList.remove("is-sticky"),e.header.classList.add("is-sticky"),e.isCover=!0,e.updateLnb(n),i.a.set(a,{opacity:0,scale:1.2}),window.scrollTo(0,o.offsetTop),i.a.fromTo(a,{opacity:0},{opacity:1,duration:1}),i.a.fromTo(a,{scale:1.2},{scale:1,duration:5})),setTimeout((function(){window.scrollLock=!1}),200),window.location.hash=n,t.preventDefault(),t.stopPropagation()}}))})),document.querySelectorAll(".btn-guide-arrow").forEach((function(t){t.addEventListener("click",(function(t){var n=this.getAttribute("data-target"),r=document.getElementById(n);i.a.to(e.scrollEl,{ease:"power2",duration:.8,scrollTo:{y:r.offsetTop+window.innerHeight-80}}),t.preventDefault(),t.stopPropagation()}))}))}},{key:"initView",value:function(){var e=this;window.scrollLock=!0,this.main=document.getElementById("main"),this.chapters=document.querySelectorAll(".chapter"),this.chapterIds=[],this.chapters.forEach((function(t){e.chapterIds.push(t.id)}));var t=document.querySelector(".footer");this.chapters[2].appendChild(t),this.header=document.getElementById("header"),this.lnb=document.querySelector(".lnb"),this.isSetStory=!1,this.isSetMindset=!1}},{key:"initLnbState",value:function(){var e,t=this;this.isCover=!0,window.addEventListener("scroll",(function(){if(!window.scrollLock){var n=document.documentElement,i=(window.pageYOffset||n.scrollTop)-(n.clientTop||0);i>100?t.isCover&&(t.isCover=!1,clearTimeout(e),e=setTimeout((function(){t.lnb.classList.add("is-sticky"),t.header.classList.remove("is-sticky")}),100),t.lnb.classList.add("has-bg")):t.isCover||(t.isCover=!0,clearTimeout(e),t.lnb.classList.remove("is-sticky"),e=setTimeout((function(){t.lnb.classList.remove("has-bg")}),100)),t.chapters.forEach((function(e){var t=e.getAttribute("id"),n=document.querySelector('[href="#'.concat(t,'"]'));i>=e.offsetTop&&i<e.offsetTop+e.clientHeight?n.parentElement.classList.add("is-active"):n.parentElement.classList.remove("is-active")}))}}))}},{key:"updateLnb",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#prologue";document.querySelectorAll(".nav__item").forEach((function(e){return e.classList.remove("is-active")}));var t=document.querySelector('[href="'.concat(e,'"]')).parentElement;t.classList.add("is-active")}},{key:"setRevealText",value:function(){r.ScrollTrigger.batch(".txt",{onEnter:function(e){e.forEach((function(e,t){if(!e.classList.contains("slogan-next-txt")){if(e.querySelector(".txt__b")){var n=e.querySelectorAll(".txt__b"),r=e.querySelectorAll(".txt__span--b");i.a.to(r,{autoAlpha:0,duration:.6,stagger:.2,delay:1.7}),i.a.to(n,{autoAlpha:1,duration:.4,stagger:.2,delay:1.2})}i.a.to(e.querySelectorAll(".txt__p"),{autoAlpha:1,duration:.8,ease:"power1.inOut",stagger:.2,delay:.5*t})}}))},start:"top 85%"}),r.ScrollTrigger.batch(".interact-p",{onEnter:function(e){i.a.to(e,{duration:1,opacity:1,delay:.6})},start:"top 85%"})}},{key:"initResize",value:function(){var e=this;this.pageInitialSizeUnit=window.innerHeight/100,setTimeout((function(){e.pageInitialSizeUnit=window.innerHeight/100,document.documentElement.style.setProperty("--vh","".concat(e.pageInitialSizeUnit,"px"))}),500)}},{key:"initYT",value:function(){var e=this;null!==document.querySelector("[data-yt]")&&(this.ytLayer=new a.a,this.ytLayer.init(),document.querySelectorAll("[data-yt]").forEach((function(t){t.addEventListener("click",(function(n){var i=t.getAttribute("data-yt");e.ytLayer.open(i),n.preventDefault(),n.stopPropagation()}))}))),this.videoLayer=new s.a,document.querySelectorAll("[data-video]").forEach((function(t){t.addEventListener("click",(function(n){var i=t.getAttribute("data-video"),r=t.getAttribute("data-poster");e.videoLayer.open(i,r),n.preventDefault(),n.stopPropagation()}))}))}},{key:"fixedBgIE",value:function(){var e,t=this;navigator.userAgent.match(/Trident\/7\./)&&window.addEventListener("mousewheel",(function(n){n.preventDefault();var r=n.wheelDelta,o=window.pageYOffset;e&&e.kill(),e=i.a.to(t.scrollEl,{duration:.1,scrollTo:{y:o-r}})}))}},{key:"getViewIndex",value:function(e){var t;return document.querySelectorAll(".nav__link").forEach((function(n,i){n.getAttribute("href")===e&&(t=i)})),t}},{key:"getViewId",value:function(e){var t;return document.querySelectorAll(".nav__link").forEach((function(n,i){i===e&&(t=n)})),t.getAttribute("href")}},{key:"getPrevIdx",value:function(e){return e-1<0?2:e-1}},{key:"getNextIdx",value:function(e){return(e+1)%3}},{key:"pinStoryCover",value:function(){r.ScrollTrigger.create({trigger:".sect--story-cover",start:"top top",end:function(){return"".concat(2*window.innerHeight)},pin:".sect--story-cover .sect__bg-visual"})}},{key:"initSlogan",value:function(){var e=this,t=document.querySelector(".slogan-container"),n=document.querySelector(".slogan-next-txt");r.ScrollTrigger.matchMedia({"(max-width: 959px)":function(){t.innerHTML="",[{id:"cut-off-1",text:"En Kia creemos que",width:290,height:42},{id:"cut-off-2",text:"movement inspires",width:250,height:42},{id:"cut-off-3",text:"ideas.",width:80,height:42},{id:"cut-off-4",text:"And thatâ€™s why we've",width:275,height:42},{id:"cut-off-5",text:"created the space for you ",width:330,height:42},{id:"cut-off-6",text:"to get inspired",width:190,height:42},{id:"cut-off-7",text:"and more time to bring",width:300,height:42},{id:"cut-off-8",text:"your ideas to life.",width:230,height:42}].forEach((function(n){t.appendChild(e.makeSloganWrap(n))}));var o=i.a.timeline({scrollTrigger:{trigger:".slogan-pad",start:"top 50%"},onComplete:function(){e.missionComplete(n)}});return o.from("#cut-off-1 .mask-rect",{scaleX:0}).from("#cut-off-2 .mask-rect",{scaleX:0}).from("#cut-off-3 .mask-rect",{scaleX:0}).from("#cut-off-4 .mask-rect",{scaleX:0}).from("#cut-off-5 .mask-rect",{scaleX:0}).from("#cut-off-6 .mask-rect",{scaleX:0}).from("#cut-off-7 .mask-rect",{scaleX:0}).from("#cut-off-8 .mask-rect",{scaleX:0}),r.ScrollTrigger.create({trigger:".slogan-pad",start:"top 30%",end:function(){return"bottom top"},pin:".slogan-container"}),function(){o.kill()}},"(min-width: 960px)":function(){t.innerHTML="",[{id:"cut-off-1",text:"En Kia creemos que el movimiento inspira ideas.",width:1e3,height:60},{id:"cut-off-2",text:"Y es por eso que hemos creado el espacio para que te inspires",width:1300,height:60},{id:"cut-off-3",text:"y más tiempo para que le des vida a tus ideas.",width:1e3,height:60}].forEach((function(n){t.appendChild(e.makeSloganWrap(n))}));var o=i.a.timeline({scrollTrigger:{trigger:".slogan-pad",start:"center 50%"},onComplete:function(){e.missionComplete(n)}});return o.from("#cut-off-1 .mask-rect",{scaleX:0,duration:1}).from("#cut-off-2 .mask-rect",{scaleX:0,duration:1}).from("#cut-off-3 .mask-rect",{scaleX:0,duration:1}),r.ScrollTrigger.create({trigger:".slogan-pad",start:"center 50%",end:function(){return"bottom top"},pin:".slogan-container"}),function(){o.kill()}}})}},{key:"missionComplete",value:function(e){if(e.querySelector(".txt__b")){var t=e.querySelectorAll(".txt__b"),n=e.querySelectorAll(".txt__span--b");i.a.to(n,{autoAlpha:0,duration:.6,stagger:.2,delay:1.2}),i.a.to(t,{autoAlpha:1,duration:.4,stagger:.2,delay:.7})}i.a.to(e.querySelectorAll(".txt__p"),{autoAlpha:1,duration:.8,ease:"power1.inOut",stagger:.2})}},{key:"makeSloganWrap",value:function(e){var t=document.createElement("div");t.classList.add("slogan-wrap");var n=['<svg class="slogan" style="width: '.concat(e.width,"px; height: ").concat(e.height,'px;">'),'<text class="interact-p interact-p--lg" fill="#fff" x="0" y="1em">',"<tspan>".concat(e.text,"</tspan>"),"</text>","</svg>",'<svg class="slogan slogan--reveal" style="width: '.concat(e.width,"px; height: ").concat(e.height,'px;">'),"<defs>",'<clipPath id="'.concat(e.id,'">'),'<rect class="mask-rect" x="0" y="0" width="'.concat(e.width,'" height="').concat(e.height,'" />'),"</clipPath>","</defs>",'<g clip-path="url(#'.concat(e.id,')">'),'<text class="interact-p interact-p--lg" fill="#fff" x="0" y="1em">',"<tspan>".concat(e.text,"</tspan>"),"</text>","</g>","</svg>"].join("");return t.innerHTML=n,t}},{key:"pinMissionBackground",value:function(){var e=document.querySelector(".sect--believe");r.ScrollTrigger.create({trigger:e,start:"top top",end:function(){return"bottom bottom"},pin:".sect--believe .bg-visual"})}},{key:"setParallaxImgStory",value:function(){var e=document.querySelector(".sect--dna .aside-box");r.ScrollTrigger.matchMedia({"(max-width: 959px)":function(){return r.ScrollTrigger.create({trigger:e,start:"top bottom",scrub:1,onUpdate:function(t){i.a.to(e.querySelector("img"),{y:t.progress*(.1*e.offsetHeight)})},id:"storyImgTriggerSM"}),function(){r.ScrollTrigger.getById("storyImgTriggerSM")&&r.ScrollTrigger.getById("storyImgTriggerSM").kill()}},"(min-width: 960px)":function(){return r.ScrollTrigger.create({trigger:e,start:"top bottom",scrub:1,onUpdate:function(t){i.a.to(e.querySelector("img"),{y:t.progress*(.2*e.offsetHeight)})},id:"storyImgTriggerLG"}),function(){r.ScrollTrigger.getById("storyImgTriggerLG")&&r.ScrollTrigger.getById("storyImgTriggerLG").kill()}}}),r.ScrollTrigger.matchMedia({"(max-width: 959px)":function(){return r.ScrollTrigger.create({trigger:".boundary-box",start:"top bottom",scrub:1,onUpdate:function(e){i.a.to(".boundary-box img",{y:-(e.progress-.5)*(.1*window.innerHeight)})},id:"boundaryImgSM"}),function(){r.ScrollTrigger.getById("boundaryImgSM")&&r.ScrollTrigger.getById("boundaryImgSM").kill()}},"(min-width: 960px)":function(){return r.ScrollTrigger.create({trigger:".boundary-box",start:"top bottom",scrub:1,onUpdate:function(e){i.a.to(".boundary-box img",{y:-(e.progress-.5)*(.2*window.innerHeight)})},id:"boundaryImgLG"}),function(){r.ScrollTrigger.getById("boundaryImgLG")&&r.ScrollTrigger.getById("boundaryImgLG").kill()}}})}},{key:"pinMindsetCover",value:function(){r.ScrollTrigger.create({trigger:".sect--mindset-cover",start:"top top",end:function(){return"".concat(2*window.innerHeight)},pin:".sect--mindset-cover .sect__bg-visual"})}},{key:"pinDimmedMindset",value:function(){r.ScrollTrigger.create({trigger:".sect--mindset-dimmed",start:function(){return"top top"},end:function(){return"+=".concat(2*window.innerHeight)},pin:!0,pinSpacing:!1,id:"mindsetDimmedMotion"})}},{key:"setBgMindset",value:function(){this.tl=i.a.timeline({scrollTrigger:{trigger:".sect--creativity",start:function(){return"top bottom-=200"},end:function(){return"+=600"},scrub:1,id:"revealDimmed"}}),this.tl2=i.a.timeline({scrollTrigger:{trigger:".sect--creativity",start:function(){return"top bottom"},end:function(){return"+=300"},scrub:1,id:"behindText"}}),this.tl.fromTo(".sect--mindset-dimmed .bg-visual",{opacity:0},{opacity:.85}),this.tl2.fromTo(".sect--mindset-dimmed .txt-wrap",{opacity:1},{opacity:0})}},{key:"initItalic",value:function(){document.querySelectorAll(".u-line").forEach((function(e,t){r.ScrollTrigger.create({trigger:e,start:"top 85%",onEnter:function(){setTimeout((function(){e.classList.add("is-line")}),1e3)},id:"italic"+(t+1)})}))}},{key:"setParallaxImgMindset",value:function(){var e=document.querySelector(".sect--creativity .aside-box");r.ScrollTrigger.matchMedia({"(max-width: 959px)":function(){return r.ScrollTrigger.create({trigger:e,start:"top bottom",scrub:1,onUpdate:function(t){i.a.to(e.querySelector("img"),{y:t.progress*(.1*e.offsetHeight)})},id:"mindsetImgTriggerSM"}),function(){r.ScrollTrigger.getById("mindsetImgTriggerSM")&&r.ScrollTrigger.getById("mindsetImgTriggerSM").kill()}},"(min-width: 960px)":function(){return r.ScrollTrigger.create({trigger:e,start:"top bottom",scrub:1,onUpdate:function(t){i.a.to(e.querySelector("img"),{y:t.progress*(.2*e.offsetHeight)})},id:"mindsetImgTriggerLG"}),function(){r.ScrollTrigger.getById("mindsetImgTriggerLG")&&r.ScrollTrigger.getById("mindsetImgTriggerLG").kill()}}})}}])&&l(t.prototype,n),c&&l(t,c),e}();document.addEventListener("DOMContentLoaded",(function(){window.bi=new c})),window.addEventListener("load",(function(){setTimeout((function(){if(window.bi.init(),location.hash){var e=location.hash,t=document.getElementById(e.split("#")[1]);if(t){var n=t.querySelector(".sect--cover"),r=t.querySelector(".sect--cover .bg-visual");window.bi.header.classList.add("is-sticky"),window.bi.isCover=!0,window.bi.updateLnb(e),i.a.set(r,{opacity:0,scale:1.2}),window.scrollTo(0,n.offsetTop),i.a.fromTo(r,{opacity:0},{opacity:1,duration:1}),i.a.fromTo(r,{scale:1.2},{scale:1,duration:5})}else window.scrollTo(0,0),window.bi.updateLnb()}else window.scrollTo(0,0),window.bi.updateLnb();var o=document.getElementById("loading-title");i.a.to(o,{autoAlpha:0}),setTimeout((function(){window.scrollLock=!1}),100)}),500)}))},5:function(e,t,n){"use strict";t.a={checkOS:function(e){if("iOS"===e)return!!Modernizr.objectfit&&(["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},debounce:function(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,n||e.apply(r,o)},s=n&&!i;clearTimeout(i),i=setTimeout(a,t),s&&e.apply(r,o)}},pad:function(e){return e<10?"0"+e:e}}},8:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(2),r=n(6),o=n(5);function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this,i=document.querySelector("[data-scroll-container]");this.layerId="video-layer",this.playerId="video-player",this.layer=document.createElement("div"),this.layer.classList.add(this.layerId);var r='\n      <div class="video-container">\n        <button type="button" class="btn-close"><span class="a11y">Close Video</span></button>\n        <video id="'.concat(this.playerId,'" class="video-player" playsinline></video>\n\n        <div id="video-controls" class="controls" data-state="hidden">\n          <button id="playpause" type="button" data-state="play"><span class="a11y">Play/Pause</span></button>\n          <div class="progress">\n            <progress id="progress" value="0" min="0">\n                <span id="progress-bar"></span>\n            </progress>\n          </div>\n          <button id="mute" type="button" data-state="mute"><span class="a11y">Mute/Unmute</span></button>\n          <button id="fs" type="button" data-state="go-fullscreen">Fullscreen</button>\n        </div>\n      </div>\n    ');i?i.insertAdjacentElement("beforebegin",this.layer):document.querySelector(".main").appendChild(this.layer),this.layer.innerHTML=r,this.btnClose=this.layer.querySelector(".btn-close"),this.btnClose.addEventListener("click",(function(e){t.close(),e.stopPropagation(),e.preventDefault()})),this.setControls();var a=document.getElementById(n.playerId);window.addEventListener("orientationchange",(function(){a.paused||o.a.checkOS("iOS")&&(0===window.orientation?a.exitFullscreen?a.exitFullscreen():a.mozCancelFullScreen?a.mozCancelFullScreen():a.webkitCancelFullScreen?a.webkitCancelFullScreen():a.msExitFullscreen&&a.msExitFullscreen():a.requestFullScreen?a.requestFullScreen():a.webkitRequestFullScreen?a.webkitRequestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitEnterFullscreen&&a.webkitEnterFullscreen())})),a.addEventListener("webkitendfullscreen",(function(e){n.close()}))}var t,n,s;return t=e,(n=[{key:"open",value:function(e,t){Object(r.a)(this.layer);var n=document.getElementById(this.playerId);n.src="".concat(e),n.poster="".concat(t),n.play(),this.layer.style.display="block",i.v.to(this.layer,{autoAlpha:1})}},{key:"close",value:function(){var e=this;Object(r.b)(this.layer),document.getElementById(this.playerId).pause(),i.v.to(this.layer,{autoAlpha:0,onComplete:function(){e.layer.style.display="none"}})}},{key:"setControls",value:function(){var e=this,t=document.getElementById(this.playerId);this.layer.querySelector(".controls").setAttribute("data-state","visible"),this.playpause=this.layer.querySelector("#playpause"),this.mute=this.layer.querySelector("#mute"),this.progressContainer=this.layer.querySelector(".progress"),this.progress=this.layer.querySelector("#progress"),this.progressBar=this.layer.querySelector("#progress-bar"),void 0!==document.createElement("progress").max||this.progress.setAttribute("data-state","fake"),t.addEventListener("play",(function(){e.changeButtonState("playpause")}),!1),t.addEventListener("pause",(function(){e.changeButtonState("playpause")}),!1),this.playpause.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.execPlayPause()}),!1),this.mute.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation(),t.muted=!t.muted,e.changeButtonState("mute")})),this.progressContainer.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation();var n=e.target,i=(e.pageX-(n.offsetLeft+n.offsetParent.offsetLeft))/n.offsetWidth;t.currentTime=i*t.duration}),!1),this.progressContainer.addEventListener("pointerdown",(function(t){t.preventDefault(),t.stopPropagation();var n=t.target,i=(t.pageX-(n.offsetLeft+n.offsetParent.offsetLeft))/n.offsetWidth;e.pos=i,e.pointer=!0}),!1),this.progressContainer.addEventListener("pointermove",(function(n){if(n.preventDefault(),n.stopPropagation(),e.pointer){var i=n.target,r=(n.pageX-(i.offsetLeft+i.offsetParent.offsetLeft))/i.offsetWidth;t.currentTime=r*t.duration}}),!1),document.addEventListener("pointerup",(function(t){t.preventDefault(),t.stopPropagation(),e.pointer=!1}),!1),t.addEventListener("timeupdate",(function(){e.progress.getAttribute("max")||e.progress.setAttribute("max",t.duration),e.progress.value=t.currentTime,e.progressBar.style.width=Math.floor(t.currentTime/t.duration*100)+"%"})),this.layer.addEventListener("mousemove",(function(){i.v.to(".controls",{autoAlpha:1}),e.layer.style.cursor="default",clearTimeout(e.controlVisibleTime),e.controlVisibleTime=setTimeout((function(){i.v.to(".controls",{autoAlpha:0}),e.layer.style.cursor="none"}),3e3)}),!1),t.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation(),e.execPlayPause()}),!1)}},{key:"execPlayPause",value:function(){var e=document.getElementById(this.playerId);e.paused||e.ended?e.play():e.pause()}},{key:"changeButtonState",value:function(e){var t=document.getElementById(this.playerId);"playpause"===e?t.paused||t.ended?this.playpause.setAttribute("data-state","play"):this.playpause.setAttribute("data-state","pause"):"mute"===e&&mute.setAttribute("data-state",t.muted?"unmute":"mute")}}])&&a(t.prototype,n),s&&a(t,s),e}()}});